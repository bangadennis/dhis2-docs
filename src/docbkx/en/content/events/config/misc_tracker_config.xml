<?xml version='1.0' encoding='UTF-8'?>
<section version="5.0"
    xsi:schemaLocation="http://docbook.org/ns/docbook http://www.docbook.org/xml/5.0/xsd/docbook.xsd"
    xmlns="http://docbook.org/ns/docbook" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xl="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:svg="http://www.w3.org/2000/svg" xmlns:mth="http://www.w3.org/1998/Math/MathML"
    xmlns:db="http://docbook.org/ns/docbook">
    <title>Misc about tracker
        <?oxy_comment_start author="cecilia" timestamp="20161004T121716+0200" comment="Copied from old Tracker topic, eeds clarification from SME if this is still valid."?>program<?oxy_comment_end?></title>
    <?oxy_comment_start author="cecilia" timestamp="20161004T112941+0200" comment="Still applicable?"?>
    <?oxy_custom_start type="oxy_content_highlight" color="255,255,0" mid="2"?>
    <para>Tracked Entity Form</para>
    <?oxy_comment_end?>
    <para>Create custom tracked entity data capture forms with tracked entity attributes.</para>
    <para>Aggregation Query Builder</para>
    <para>Set up aggregation rules for the process of aggregating tracked entity data to statistical
        data.</para>
    <para>Automated
        <?oxy_comment_start author="cecilia" timestamp="20161004T113206+0200" comment="In the Schedule app?"?>Aggregation<?oxy_comment_end?></para>
    <para>Schedule an automated tracked entity aggregation process, e.g. to run all pre-defined
        aggregation queries every midnight. </para>
    <?oxy_custom_end mid="2"?>
    <section>
        <title>Tracked entity form</title>
        <para>The tracked entity form section provides a mechanism for defining custom registration
            form for each available program in system or for normal registration form which is used
            to register any entity without having program information and this entity can enroll
            into a certain program after that.</para>
        <para>To access the entity registration form maintenance module, from <emphasis
                role="italic">Apps</emphasis> menu, go to <emphasis role="italic">Programs /
                Attributes</emphasis> option and click on it and select <emphasis role="italic"
                >Tracked Entity Form</emphasis> option.</para>
        <para>To define a custom registration form, please select a program in list and click on the
            row corresponding the program you want to design. Then select <emphasis role="italic"
                >Design registration form</emphasis> link on context menu.</para>
        <note>
            <para>Check on<emphasis role="italic"> Auto save registration form</emphasis> checkbox
                in <emphasis role="italic">Design tracked entity form </emphasis>to save the custom
                registration form to being designed automatically.</para>
        </note>
    </section>
    <section>
        <title>Aggregation query builder</title>
        <para>This is the core functionality for linking data between tracker module and aggregate
            management module by defining the linking/aggregating rules. The purpose is to produce
            aggregated data / statistics based on the low-level case based data. It is based around
            flexible aggregation query definitions which maps the data elements used for case based
            data management to data elements used for aggregate data.</para>
        <para>This provides two functions - </para>
        <itemizedlist>
            <listitem>
                <para><emphasis role="italic">Apps &gt; Programs / Attributes &gt; Aggregation query
                        builder</emphasis> is a tool for defining formulas, expressions, rules for
                    aggregation data from tracker to aggregation module. </para>
            </listitem>
            <listitem>
                <para><emphasis role="italic">Apps &gt; Individual Records &gt; Manual
                        Aggregation</emphasis> is used for generating routine data values from
                    individual data by period and organization unit.</para>
            </listitem>
        </itemizedlist>
        <section>
            <title>Basic information </title>
            <para>To access <emphasis role="italic">Aggregation Query Builder</emphasis> module,
                from the <emphasis role="italic">Apps</emphasis> menu, go to the <emphasis
                    role="italic">Programs / Attributes</emphasis> option. Select <emphasis
                    role="italic">Aggregation Query Builder</emphasis> option on left menu to
                proceed.</para>
            <para>To define a formula, click the <emphasis role="italic">Add new</emphasis>
                button.</para>
            <screenshot>
                <mediaobject>
                    <imageobject>
                        <imagedata width="70%"
                            fileref="resources/images/patients_programs/example_query.png"
                            format="PNG"/>
                    </imageobject>
                </mediaobject>
            </screenshot>
            <para>Basic information -</para>
            <itemizedlist>
                <listitem>
                    <para><emphasis role="italic">Name</emphasis> - Provide name of query, this name
                        is usually same with the name of aggregate data element. For example Number
                        of mothers got VAT, Number of children got BCG vaccine,...</para>
                </listitem>
                <listitem>
                    <para><emphasis role="italic">Dataset</emphasis> - Select dataset contains data
                        elements which will be used to link with individual data.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="italic">Data element</emphasis> - Select aggregate data
                        element which will be used to link with individual data.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="italic">Operator</emphasis> - There are six
                        operators</para>
                    <para>1) Select <emphasis role="italic">Number of tracked entity
                            instances</emphasis> if aggregate based on entities;</para>
                    <para>2) Select <emphasis role="italic">Number of visits</emphasis> if aggregate
                        data based on times that entitys received services.</para>
                    <para>3) Select <emphasis role="italic">Sum of data element values </emphasis>to
                        get sum of data values of data element in <emphasis role="italic">Data
                            element for sum/average</emphasis> field with the criteria in the
                        condition field.</para>
                    <para>4) Select <emphasis role="italic">Average of data element values
                        </emphasis>to get average of data values of data element in <emphasis
                            role="italic">Data element for sum/average</emphasis> field with the
                        criteria in the condition field.</para>
                    <para>5) Select <emphasis role="italic">Minimum of data element values
                        </emphasis>to get min of data values of data element in <emphasis
                            role="italic">Data element for sum/average</emphasis> field with the
                        criteria in the condition field.</para>
                    <para>6) Select <emphasis role="italic">Maximum of data element values
                        </emphasis>to get max of data values of data element in <emphasis
                            role="italic">Data element for sum/average</emphasis> field with the
                        criteria in the condition field.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="italic">Program</emphasis> - Select program needed for
                        aggregation.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="italic">Program Stage</emphasis> - Select program stage
                        from the selected program above.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="italic">Data element for sum/average/min/max</emphasis> -
                        Select an data element for operator as Sum / Average / Min / Max.</para>
                </listitem>
            </itemizedlist>
            <para>Next section included 3 tabs: <emphasis role="italic">Data elements</emphasis>,
                    <emphasis role="italic">entity attributes</emphasis> and <emphasis role="italic"
                    >Program</emphasis>. Depend on the requirement of data aggregation, data
                element, entity attributes, and number of programs are selected. </para>
            <para><emphasis role="bold">
                    <emphasis role="underline"><emphasis role="italic">Data elements
                        tab</emphasis>:</emphasis>
                </emphasis> List all available data elements from selected program stage. To create
                a formula related to each data element, double click on the data element. The
                formula of the data element is filled on the condition field, like [DE:1.2.3], in
                with: </para>
            <itemizedlist>
                <listitem>
                    <para>1 - id of the selected program.</para>
                </listitem>
                <listitem>
                    <para>2 - id of the selected program stage.</para>
                </listitem>
                <listitem>
                    <para>3 - id of the selected data element.</para>
                </listitem>
            </itemizedlist>
            <note>
                <para>The formula can be created without any program stage, like [DE:1.*.3]</para>
            </note>
            <para><emphasis role="bold">
                    <emphasis role="underline">
                        <emphasis role="italic">Attribute tab</emphasis>
                    </emphasis>
                </emphasis>- List all available fixed attributes, such as gender, DOB type, Age
                (days), .. and user-defined attributes. Besides, provide a formula for calculating
                number of entities who registered in system. However, if a program without
                registration is selected, entity attributes aren&apos;t displayed.</para>
            <para><emphasis role="bold">
                    <emphasis role="underline">
                        <emphasis role="italic">Program tab</emphasis>
                    </emphasis>
                </emphasis> - Provide formulas for calculating data value related to the selected
                program and program stage - </para>
            <itemizedlist>
                <listitem>
                    <para>The number of entities who enrolled the selected program.</para>
                </listitem>
                <listitem>
                    <para>The number of entities / times that ( Date of enrollment - Date of
                        incident ) is greater then a certain number.</para>
                </listitem>
                <listitem>
                    <para>The number of entities who visited the selected program stage OR the
                        number of visits what are registered in the system.</para>
                </listitem>
                <listitem>
                    <para>The number of entities by age at the report-time.</para>
                </listitem>
            </itemizedlist>
            <para><emphasis role="bold">
                    <emphasis role="italic">
                        <emphasis role="italic">
                            <emphasis role="underline">Condition section </emphasis>
                        </emphasis>
                    </emphasis>
                </emphasis>- This section contains comparing operations (&lt;, &lt;=, &gt;, &gt;=,
                =, != ), calculation operation (+), priority operation ( ( ) ), boolean values (Yes,
                No), status operations (=NULL, != NULL, DateDiff(xxx, Incident date), DateDiff(xxx,
                Enrollment date), DateDiff(xxx, Report date) ), relation operations (AND, OR,
                COMBINE). These operations are used for supporting in setting condition for query. </para>
            <note>
                <para>COMBINE operator is used for calculate number of children organidation units
                    completed all program-stage-instances. E.g For the formula like this
                    [PSIC:1149293] COMBINE [PSIC:1150010]. The system will calculated the number of
                    children orgunits of the selected orgunit which have all program-stage-instances
                    with stage-id as <emphasis role="italic">1149293</emphasis> and <emphasis
                        role="italic">1150010</emphasis> completed. You can find this special
                    formula [PSIC:xxx] by clicking on <emphasis role="italic">Completed</emphasis>
                    option in <emphasis role="italic">Program</emphasis> tab.</para>
            </note>
            <para><emphasis role="italic">
                    <emphasis role="bold">
                        <emphasis role="underline">Description section</emphasis>
                    </emphasis>
                </emphasis> - Show description for the condition above. </para>
            <para>E.g. To get number of <emphasis role="italic">girls</emphasis> who got <emphasis
                    role="italic">Vitamin A dose 6</emphasis> enrolled <emphasis role="italic">Child
                    Health program</emphasis> on <emphasis role="italic">January 2012</emphasis>.
                Then query is created as in the figure below. Note that January 2012 is period
                parameter which user will select when generate report. It is not set in the
                query.</para>
        </section>
        <section>
            <title>Sample of aggregation query builder</title>
            <para>E.g. Find the number of the children vaccinated BCG by defining a linking rule
                between the data elements of aggregate dataset named <emphasis role="italic">Number
                    of children - BCG</emphasis> and the data element of a program stage named
                    <emphasis role="italic">BCG dose given</emphasis>.</para>
            <orderedlist>
                <listitem>
                    <para>From <emphasis role="italic">Apps</emphasis> menu, go to <emphasis
                            role="italic">Data Element and Indicators</emphasis> option and click on
                        it. Select <emphasis role="italic">Data Element</emphasis> option to define
                        two new data elements -</para>
                    <para>1) Define a new data element named <emphasis role="italic">Number of
                            children - BCG</emphasis> with <emphasis role="italic"
                            >Aggregate</emphasis> option for Domain Type.</para>
                    <para>2) Define a new data element named <emphasis role="italic">BCG dose give
                            date</emphasis> with <emphasis role="italic">Patient</emphasis> option
                        for Domain Type.</para>
                </listitem>
                <listitem>
                    <para>From <emphasis role="italic">Apps</emphasis> menu, go to <emphasis
                            role="italic">Datasets</emphasis> option and click on it. Select
                            <emphasis role="italic">Dataset</emphasis> option to create a new
                        dataset named <emphasis role="italic">BCG Report</emphasis> and add
                            <emphasis role="italic">Number of children - BCG</emphasis> data element
                        into the dataset.</para>
                </listitem>
                <listitem>
                    <para>From <emphasis role="italic">Apps</emphasis> menu, go to <emphasis
                            role="italic">Programs / Attributes</emphasis> option and click on it.
                        Select <emphasis role="italic">Program</emphasis> option to create a program
                        named <emphasis role="italic">Child Health Program</emphasis> with a stage
                        named <emphasis role="italic">Birth Details</emphasis> and add the <emphasis
                            role="italic">BCG dose given</emphasis> data element into this
                        stage.</para>
                </listitem>
                <listitem>
                    <para>Create a new aggregation query builder named <emphasis role="italic"
                            >Number of children - BCG Builder </emphasis>to linking between the data
                        elements.</para>
                </listitem>
                <listitem>
                    <para>From <emphasis role="italic">Services</emphasis> menu, go to <emphasis
                            role="italic">Individual Records </emphasis>option and click on it.
                        Select <emphasis role="italic">entity</emphasis> option below <emphasis
                            role="italic">Registration</emphasis> header in the left menu to
                        register three entities named <emphasis role="italic">Micheal</emphasis>,
                            <emphasis role="italic">Alice</emphasis> and <emphasis role="italic"
                            >Tom</emphasis> in <emphasis role="italic">Ngelehun CHC</emphasis> and
                        enroll them into <emphasis role="italic">Child Health
                        Program</emphasis>.</para>
                    <para>1) For <emphasis role="italic">Micheal</emphasis>, open the <emphasis
                            role="italic">Birth Details</emphasis> stage into <emphasis
                            role="italic">Child Health Program</emphasis>. Enter value for <emphasis
                            role="italic">BCG dose give date</emphasis> data element as
                            &quot;<emphasis role="italic">2012-01-18</emphasis>&quot;.</para>
                    <para>2) For <emphasis role="italic">Alice</emphasis>, open the <emphasis
                            role="italic">Birth Details</emphasis> stage into Child Health Program.
                        Enter value for <emphasis role="italic">BCG dose give date</emphasis> data
                        element as &quot;<emphasis role="italic">2012-01-18</emphasis>&quot;.</para>
                    <para>3) For <emphasis role="italic">Tom</emphasis>, no enter any data value for
                            <emphasis role="italic">Birth Details</emphasis> stage.</para>
                    <warning>
                        <para>Before entering data value for the stage, choose <emphasis
                                role="italic">Report Date</emphasis> as &quot;<emphasis
                                role="italic">2012-01-18</emphasis>&quot;.</para>
                    </warning>
                </listitem>
                <listitem>
                    <para>From <emphasis role="italic">Services</emphasis> menu, go to <emphasis
                            role="italic">Individual Records</emphasis> option and click on it.
                        Select <emphasis role="italic">Manual entity aggregation</emphasis> option
                        to run<emphasis role="italic"> Number of children - BCG Builder</emphasis>
                        to get data value and save it into database.</para>
                    <screenshot>
                        <mediaobject>
                            <imageobject>
                                <imagedata width="70%"
                                    fileref="resources/images/patients_programs/person_aggregation_form.png"
                                    format="PNG"/>
                            </imageobject>
                        </mediaobject>
                    </screenshot>
                    <screenshot>
                        <title>- Result after running the query builder</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata width="70%"
                                    fileref="resources/images/patients_programs/example_person_aggregation_result.png"
                                    format="PNG"/>
                            </imageobject>
                        </mediaobject>
                    </screenshot>
                    <note>
                        <para>You can click <emphasis role="italic">Aggregate and Save</emphasis>
                            button to save data values aggregated into the database directly.</para>
                    </note>
                </listitem>
            </orderedlist>
        </section>
    </section>
    <section>
        <title>Schedule automated aggregation</title>
        <para>The aggregation query builder jobs can be automatically scheduled to run on regular
            intervals. At midnight, this job runs and get all datasets which have data elements
            defined into Aggregate Query Builder formulas. Based on the period types of datasets,
            the system runs formulas at the end of end-date of current period. E.g. if today is on
            1A.M. in 2013-02-01, the system gets a monthly dataset and other period-type datasets
            with aggregate formulas, then system will only run aggregate formulas of the monthly
            dataset with period as Jan 2013.</para>
        <para>Select an option in <emphasis role="italic">Task strategy </emphasis>to set way to get
            period list for aggregating. There four options - </para>
        <para>1) <emphasis role="italic">Last month</emphasis> - Get period list by period-types of
            data sets from last month to current date. E.g. for daily datasets, if current date is
                <emphasis role="italic">2013-03-09</emphasis>, period list is get from <emphasis
                role="italic"> 2013-02-09</emphasis> to <emphasis role="italic">
                2013-03-09</emphasis>. For month datasets, periods list is <emphasis role="italic"
                >Feb 2013</emphasis> and <emphasis role="italic">Mar 2013.</emphasis></para>
        <para>2) <emphasis role="italic">Last 3 month</emphasis> - Get periods by from last 3 month
            to current date.</para>
        <para>3) <emphasis role="italic">Last 6 month</emphasis> - Get periods by from last 6 month
            to current date</para>
        <para>4) <emphasis role="italic">Last 12 month</emphasis> - Get periods by from last 12
            month to current date</para>
        <para><emphasis role="italic"><emphasis role="italic">Click</emphasis> Start</emphasis>
            button to enable the scheduled job to run at mid-night or can be run immediately by
            pressing <emphasis role="italic">Execute</emphasis> button.</para>
    </section>
    <section>
        <title>Basic information</title>
        <para>To assign a program for user roles, click on the program which you would like and
            select <emphasis role="italic">Assign program to userroles</emphasis> menu. Then select
            user roles which you want in <emphasis role="italic">Available</emphasis> section and
            click <emphasis role="italic">Move selected items</emphasis> button or double click on
            the user role to move to <emphasis role="italic">Selected</emphasis> section. Finally,
            click <emphasis role="italic">OK</emphasis> to finish.</para>
        <para>Besides, you can search user groups by typing a key in text field to set authorities.
            The result will loaded and you can select the group you want. Then click (+) button and
            the selected one will be displayed in below.</para>
    </section>
</section>
